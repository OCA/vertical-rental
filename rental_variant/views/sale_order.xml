<?xml version="1.0" encoding="UTF-8" ?>
<!-- Copyright (C) 2023 Akretion (<http://www.akretion.com>).
 @author KÃ©vin Roche <kevin.roche@akretion.com>  -->
<odoo>
    <record id="view_order_form" model="ir.ui.view">
        <field name="name">sale_rental.view_order_form</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale_rental.view_order_form" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='order_line']/tree" position="attributes">
                <attribute name="editable">bottom</attribute>
            </xpath>
            <xpath
                expr="//field[@name='order_line']/tree/field[@name='start_date']"
                position="attributes"
            >
                <attribute
                    name="attrs"
                >{'invisible': [('must_have_dates', '=', False)]}</attribute>
                <attribute name="readonly">1</attribute>
            </xpath>
            <xpath
                expr="//field[@name='order_line']/tree/field[@name='end_date']"
                position="attributes"
            >
                <attribute
                    name="attrs"
                >{'invisible': [('must_have_dates', '=', False)]}</attribute>
                <attribute name="readonly">1</attribute>
            </xpath>
            <xpath
                expr="//field[@name='order_line']/tree/field[@name='number_of_days']"
                position="attributes"
            >
                <attribute
                    name="attrs"
                >{'invisible': [('must_have_dates', '=', False)]}</attribute>
                <attribute name="readonly">1</attribute>
            </xpath>
            <xpath
                expr="
                //field[@name='order_line']/tree/field[@name='start_date']"
                position="before"
            >
                <field name="is_rental" invisible="1" />
                <button
                    string="Rental Config."
                    name="open_rental_line_wizard"
                    type="object"
                    attrs="{'invisible': ['|',('is_rental', '=', False), ('parent.state', '!=', 'draft')]}"
                    class="btn btn-info"
                />
                <field
                    name="rental_id"
                    attrs="{'invisible': [('rental_id', '=', False)]}"
                />

            </xpath>
            <xpath
                expr="//field[@name='order_line']/tree/field[@name='product_uom_qty']"
                position="attributes"
            >
                <attribute
                    name="attrs"
                >{'readonly': [('is_rental', '=', True)]}</attribute>
            </xpath>
        </field>
    </record>
</odoo>
